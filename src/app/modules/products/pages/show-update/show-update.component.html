<div class="global-form">

    <div class="text-center" *ngIf="!isDataLoaded; else productFormTemplate">
        <div class="spinner-grow" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <ng-template #productFormTemplate>

        <form [formGroup]="productForm">

            <h2 class="text-center">Producto
                <i class="bi bi-pencil" *ngIf="!isPencilHover" (mouseenter)="isPencilHover = true"></i>
                <i class="bi bi-pencil-fill" *ngIf="isPencilHover" (mouseleave)="isPencilHover = false"
                    (click)="changeMode()"></i>
            </h2>

            <div class="form-group">
                <input type="text" class="form-control" placeholder="Nombre" formControlName="name">
                <div *ngIf="name?.invalid && (name?.dirty || name?.touched)">
                    <div class="error-text" *ngIf="name?.errors?.['required']">* El nombre es obligatorio</div>
                </div>
            </div>

            <div class="form-group">
                <input type="number" class="form-control" placeholder="Precio" formControlName="price">
                <div *ngIf="price?.invalid && (price?.dirty || price?.touched)">
                    <div class="error-text" *ngIf="price?.errors?.['required']">* El precio es obligatorio</div>
                </div>
            </div>

            <div class="form-group">
                <input type="number" class="form-control" placeholder="Stock" formControlName="stock">
                <div *ngIf="stock?.invalid && (stock?.dirty || stock?.touched)">
                    <div class="error-text" *ngIf="stock?.errors?.['required']">* El stock es obligatorio</div>
                </div>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="checkbox" formControlName="active" id="activeCheck">
                <label class="form-check-label" for="activeCheck">
                    Activo
                </label>
            </div>

            <br>

            <div class="form-group">
                <select class="form-control" formControlName="category">
                    <option value="-1">Categoria</option>
                    <option *ngFor="let category of categories" [value]="category.uid">{{category.name}}</option>
                </select>
            </div>

            <div class="form-group">
                <button type="submit" class="btn btn-primary btn-block" (click)="updateProduct()" [disabled]="isFormDisabled">
                    <!-- <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> -->
                    Actualizar
                </button>
            </div>

        </form>

    </ng-template>

</div>